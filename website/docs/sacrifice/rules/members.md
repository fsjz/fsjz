年龄参考年份：<select id="caldate" style="margin: 30px 0 10px 0"></select>

注：可以修改参考年份显示不同时间的年龄{.warn}

|字辈|姓名|应出(元)|生日|年龄|备注|
|:-:|:-|:-:|:-:|:-:|:-|
|太字辈{rowspan=8 .vm}|方太中*2*{.h}||1950年二月廿九*04-15*{.m}|||
|{.h}|方太成*2*{.h}||1952年正月初四*01-30*{.m}|||
|{.h}|方太加*2*{.h}||1956年七月初六*08-11*{.m}|||
|{.h}|方太军*2*{.h}||1959年六月廿八*08-02*{.m}|||
|{.h}|方太华*1*{.h}||1961年九月廿三*11-01*{.m}|||
|{.h}|方太强*2*{.h}||1965年七月初八*08-04*{.m}|||
|{.h}|方太文*1*{.h}||1970年九月廿四*10-23*{.m}|||
|{.h}|方太福*1*{.h}||1973年冬月初十*12-04*{.m}|||
|运字辈{rowspan=16 .vm}|方运红*1*{.h}||1974年二月十七*03-10*{.m}|||
|{.h}|方运辉*1*{.h}||1976年八月初一*09-24*{.m}|||
|{.h}|方运飞*1*{.h}||1979年六月十四*07-07*{.m}|||
|{.h}|方运勇*1*{.h}||1982年二月廿五*03-20*{.m}|||
|{.h}|方运江*1*{.h}||1983年五月十六*06-26*{.m}|||
|{.h}|方运进*1*{.h}||1984年正月十三*02-14*{.m}|||
|{.h}|方运木*1*{.h}||1984年八月廿九*09-24*{.m}|||
|{.h}|方运德*1*{.h}||1985年冬月初一*12-12*{.m}|||
|{.h}|方运波*1*{.h}||1987年八月十七*10-09*{.m}|||
|{.h}|方运杰*0*{.h}||1989年冬月初一*11-28*{.m}|||
|{.h}|方林*1*{.h}||1992年四月廿八*05-30*{.m}|||
|{.h}|方运忠*0*{.h}||1995年二月十七*03-17*{.m}|||
|{.h}|方运培*0*{.h}||1997年九月初八*10-09*{.m}|||
|{.h}|方运久*0*{.h}||1998年五月二十*06-14*{.m}|||
|{.h}|方运刚*0*{.h}||1999年十月初二*11-09*{.m}|||
|{.h}|方运松*0*{.h}||2005年正月初五*02-13*{.m}|||
|永字辈{rowspan=16 .vm}|方鹏*0*{.h}||1995年八月初六*08-31*{.m}|||
|{.h}|方华*0*{.h}||2001年九月廿六*11-11*{.m}|||
|{.h}|方梓鸥*0*{.h}||2011年腊月初七*12-31*{.m}|||
|{.h}|方永圣*0*{.h}||2012年三月二十*04-10*{.m}|||
|{.h}|方远航*0*{.h}||2012年八月廿八*10-13*{.m}|||
|{.h}|方浩轩*0*{.h}||2014年七月初五*07-31*{.m}|||
|{.h}|方浩宇*0*{.h}||2014年七月初五*07-31*{.m}|||
|{.h}|方梓藤*0*{.h}||2016年四月十九*05-25*{.m}|||
|{.h}|方辰逸*0*{.h}||2017年三月廿七*04-23*{.m}|||
|{.h}|方远程*0*{.h}||2018年冬月廿三*12-29*{.m}||{#memberTable}|

<script>
function getAge(l, lunar) {
    var DATE = ['', '一','二','三','四','五','六','七','八','九','十','十一','十二','十三','十四','十五','十六','十七','十八','十九','二十','廿一','廿二','廿三','廿四','廿五','廿六','廿七','廿八','廿九','三十'];
    var MONTH = ['', '一','二','三','四','五','六','七','八','九','十','冬','腊'];
    var indexOf = function(arr, v) {for(var i in arr) { if (arr[i]==v) return i }};
    var tmp = lunar.split('年');
    var ly = tmp[0];
    tmp = tmp[1].split('月');
    var lm = indexOf(MONTH, tmp[0]);
    var ld = indexOf(DATE, tmp[1]);
    var age = l[0] -ly;
    if (l[1] < lm || (l[1] == lm && l[2] < ld)) {
        age--;
    }
    return age;
}
function updateAge(year, month, date) {
    $('#memberTable tr').each(function(i){
        var tds = $(this).children('td');
        if (i != 0) {
            var flag = $(tds[1]).text().replace(/[^\d]*(\d*)/, '$1');
            var text = $(tds[3]).text();
            var age = getAge([year, month, date], text.replace(/\d\d-\d\d$/, ''));
            var fee = 10;
            var info = '未满18岁且未成家';
            var className = 'lv1';
            if (flag == 2) {
                fee = 50;
                info = '已经完成任务';
                className = 'lv4';
            } else if (flag == 1) {
                fee = 100;
                info = '成家且未完成任务';
                className = 'lv3';
            } else if (age >= 18 && flag == 0) {
                fee = 50;
                info = '满18岁还未成家';
                className = 'lv2';
            } else if (age < 0) {
                fee = 0;
                info = '还未出生';
                className = 'lv0';
            }
            $(tds[2]).text(fee);
            $(tds[4]).text(age);
            $(tds[5]).text(info);
            $(tds[2]).attr("class", className);
            $(tds[5]).attr("class", className);
        }
    });
}
var now = new Date();
var year = now.getFullYear()+1;
for (var i=-5; i<=5; i++) {
    $('#caldate').append("<option value='"+(year+i)+"'>"+(year+i)+"年正月初一</option>");
}
$("#caldate").val(year);
$('#caldate').change(function(e) { updateAge($(this).val(), 1, 1) });
updateAge(year, 1, 1);
</script>
